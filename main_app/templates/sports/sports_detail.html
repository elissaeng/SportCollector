{% extends 'base.html' %}

{% block content %}

  <h1>Sport Detail</h1>

  <div class="card">
    <div class="card-content">
      <span class="card-title">{{ sport.name }}</span>
      <p>Description: {{ sport.description }}</p>
      <p>Location: {{ sport.location }}</p>
      <p>Is It Fun: {{ sport.is_fun }}</p>
    </div>

    <div class="card-action">
      <a href="{% url 'delete_sport' sport.id %}">Delete Sport</a>
      <a href="{% url 'update_sport' sport.id %}">Update Sport</a>
    </div>

    <hr />

    <form action="{% url 'add_athlete' sport.id %}" method="post">
      {% csrf_token %}
      {{ AthleteForm.as_p }}
      <input type="submit" class="btn" value="Add Athlete">
    </form>

    <table class="striped">
      <tbody>
        {% for athlete in sport.athlete_set.all %}
          <tr>
            <td>{{athlete.name}}</td>
            <td>{{athlete.age }}</td>
            <td><a href="{% url 'delete_athlete' sport.id athlete.id%}">Delete</a></td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

  <hr />

  <div class="row">
    <div class="col s6">
      <h3>{{ athlete.name }}'s Sponsers</h3>

        {% if athlete.sponsers.count %}

          {% for sponser in atlete.sponsers.all %}
            <div class="card">
              <div class = "card-content">
                <span class="card-title">{{ sponser.name }}</span>
                <a class="btn red" href="{% url 'remove_sponser' athlete.id sponser.id %}">Delete</a>
              </div>
            </div>
          {% endfor %} 
        
        {% else %}  
          <h5>No Sponsers</h5>
        {% endif %}  
    </div>
  </div>

  {% for sponser in sponsers %}
  <div class="card">
    
    <div class="card-content">
      <span class="card-title">{{ sponser.name }}</span>
    </div>

    <div class="card-action">
      <form action="{% url 'assoc_sponser' athlete.id sponser.id %}" method="POST">
        {% csrf_token %}
        <button type="submit" class="btn">Add</button>
      </form>
    </div>

  </div>
{% endfor %}

  
{% endblock %}

  
  